{"version":3,"file":"react-onclickoutside.es.mjs","sources":["../../../../../../../node_modules/.pnpm/react-onclickoutside@6.13.1_react-dom@18.2.0_react@18.2.0/node_modules/react-onclickoutside/dist/react-onclickoutside.es.js"],"sourcesContent":["import {createElement,Component}from'react';import {findDOMNode}from'react-dom';function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n\n  _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}/**\n * Check whether some DOM node is our Component's node.\n */\nfunction isNodeFound(current, componentNode, ignoreClass) {\n  if (current === componentNode) {\n    return true;\n  } // SVG <use/> elements do not technically reside in the rendered DOM, so\n  // they do not have classList directly, but they offer a link to their\n  // corresponding element, which can have classList. This extra check is for\n  // that case.\n  // See: http://www.w3.org/TR/SVG11/struct.html#InterfaceSVGUseElement\n  // Discussion: https://github.com/Pomax/react-onclickoutside/pull/17\n\n\n  if (current.correspondingElement) {\n    return current.correspondingElement.classList.contains(ignoreClass);\n  }\n\n  return current.classList.contains(ignoreClass);\n}\n/**\n * Try to find our node in a hierarchy of nodes, returning the document\n * node as highest node if our node is not found in the path up.\n */\n\nfunction findHighest(current, componentNode, ignoreClass) {\n  if (current === componentNode) {\n    return true;\n  } // If source=local then this event came from 'somewhere'\n  // inside and should be ignored. We could handle this with\n  // a layered approach, too, but that requires going back to\n  // thinking in terms of Dom node nesting, running counter\n  // to React's 'you shouldn't care about the DOM' philosophy.\n  // Also cover shadowRoot node by checking current.host\n\n\n  while (current.parentNode || current.host) {\n    // Only check normal node without shadowRoot\n    if (current.parentNode && isNodeFound(current, componentNode, ignoreClass)) {\n      return true;\n    }\n\n    current = current.parentNode || current.host;\n  }\n\n  return current;\n}\n/**\n * Check if the browser scrollbar was clicked\n */\n\nfunction clickedScrollbar(evt) {\n  return document.documentElement.clientWidth <= evt.clientX || document.documentElement.clientHeight <= evt.clientY;\n}// ideally will get replaced with external dep\n// when rafrex/detect-passive-events#4 and rafrex/detect-passive-events#5 get merged in\nvar testPassiveEventSupport = function testPassiveEventSupport() {\n  if (typeof window === 'undefined' || typeof window.addEventListener !== 'function') {\n    return;\n  }\n\n  var passive = false;\n  var options = Object.defineProperty({}, 'passive', {\n    get: function get() {\n      passive = true;\n    }\n  });\n\n  var noop = function noop() {};\n\n  window.addEventListener('testPassiveEventSupport', noop, options);\n  window.removeEventListener('testPassiveEventSupport', noop, options);\n  return passive;\n};function autoInc(seed) {\n  if (seed === void 0) {\n    seed = 0;\n  }\n\n  return function () {\n    return ++seed;\n  };\n}\n\nvar uid = autoInc();var passiveEventSupport;\nvar handlersMap = {};\nvar enabledInstances = {};\nvar touchEvents = ['touchstart', 'touchmove'];\nvar IGNORE_CLASS_NAME = 'ignore-react-onclickoutside';\n/**\n * Options for addEventHandler and removeEventHandler\n */\n\nfunction getEventHandlerOptions(instance, eventName) {\n  var handlerOptions = {};\n  var isTouchEvent = touchEvents.indexOf(eventName) !== -1;\n\n  if (isTouchEvent && passiveEventSupport) {\n    handlerOptions.passive = !instance.props.preventDefault;\n  }\n\n  return handlerOptions;\n}\n/**\n * This function generates the HOC function that you'll use\n * in order to impart onOutsideClick listening to an\n * arbitrary component. It gets called at the end of the\n * bootstrapping code to yield an instance of the\n * onClickOutsideHOC function defined inside setupHOC().\n */\n\n\nfunction onClickOutsideHOC(WrappedComponent, config) {\n  var _class, _temp;\n\n  var componentName = WrappedComponent.displayName || WrappedComponent.name || 'Component';\n  return _temp = _class = /*#__PURE__*/function (_Component) {\n    _inheritsLoose(onClickOutside, _Component);\n\n    function onClickOutside(props) {\n      var _this;\n\n      _this = _Component.call(this, props) || this;\n\n      _this.__outsideClickHandler = function (event) {\n        if (typeof _this.__clickOutsideHandlerProp === 'function') {\n          _this.__clickOutsideHandlerProp(event);\n\n          return;\n        }\n\n        var instance = _this.getInstance();\n\n        if (typeof instance.props.handleClickOutside === 'function') {\n          instance.props.handleClickOutside(event);\n          return;\n        }\n\n        if (typeof instance.handleClickOutside === 'function') {\n          instance.handleClickOutside(event);\n          return;\n        }\n\n        throw new Error(\"WrappedComponent: \" + componentName + \" lacks a handleClickOutside(event) function for processing outside click events.\");\n      };\n\n      _this.__getComponentNode = function () {\n        var instance = _this.getInstance();\n\n        if (config && typeof config.setClickOutsideRef === 'function') {\n          return config.setClickOutsideRef()(instance);\n        }\n\n        if (typeof instance.setClickOutsideRef === 'function') {\n          return instance.setClickOutsideRef();\n        }\n\n        return findDOMNode(instance);\n      };\n\n      _this.enableOnClickOutside = function () {\n        if (typeof document === 'undefined' || enabledInstances[_this._uid]) {\n          return;\n        }\n\n        if (typeof passiveEventSupport === 'undefined') {\n          passiveEventSupport = testPassiveEventSupport();\n        }\n\n        enabledInstances[_this._uid] = true;\n        var events = _this.props.eventTypes;\n\n        if (!events.forEach) {\n          events = [events];\n        }\n\n        handlersMap[_this._uid] = function (event) {\n          if (_this.componentNode === null) return;\n          if (_this.initTimeStamp > event.timeStamp) return;\n\n          if (_this.props.preventDefault) {\n            event.preventDefault();\n          }\n\n          if (_this.props.stopPropagation) {\n            event.stopPropagation();\n          }\n\n          if (_this.props.excludeScrollbar && clickedScrollbar(event)) return;\n          var current = event.composed && event.composedPath && event.composedPath().shift() || event.target;\n\n          if (findHighest(current, _this.componentNode, _this.props.outsideClickIgnoreClass) !== document) {\n            return;\n          }\n\n          _this.__outsideClickHandler(event);\n        };\n\n        events.forEach(function (eventName) {\n          document.addEventListener(eventName, handlersMap[_this._uid], getEventHandlerOptions(_assertThisInitialized(_this), eventName));\n        });\n      };\n\n      _this.disableOnClickOutside = function () {\n        delete enabledInstances[_this._uid];\n        var fn = handlersMap[_this._uid];\n\n        if (fn && typeof document !== 'undefined') {\n          var events = _this.props.eventTypes;\n\n          if (!events.forEach) {\n            events = [events];\n          }\n\n          events.forEach(function (eventName) {\n            return document.removeEventListener(eventName, fn, getEventHandlerOptions(_assertThisInitialized(_this), eventName));\n          });\n          delete handlersMap[_this._uid];\n        }\n      };\n\n      _this.getRef = function (ref) {\n        return _this.instanceRef = ref;\n      };\n\n      _this._uid = uid();\n      _this.initTimeStamp = performance.now();\n      return _this;\n    }\n    /**\n     * Access the WrappedComponent's instance.\n     */\n\n\n    var _proto = onClickOutside.prototype;\n\n    _proto.getInstance = function getInstance() {\n      if (WrappedComponent.prototype && !WrappedComponent.prototype.isReactComponent) {\n        return this;\n      }\n\n      var ref = this.instanceRef;\n      return ref.getInstance ? ref.getInstance() : ref;\n    };\n\n    /**\n     * Add click listeners to the current document,\n     * linked to this component's state.\n     */\n    _proto.componentDidMount = function componentDidMount() {\n      // If we are in an environment without a DOM such\n      // as shallow rendering or snapshots then we exit\n      // early to prevent any unhandled errors being thrown.\n      if (typeof document === 'undefined' || !document.createElement) {\n        return;\n      }\n\n      var instance = this.getInstance();\n\n      if (config && typeof config.handleClickOutside === 'function') {\n        this.__clickOutsideHandlerProp = config.handleClickOutside(instance);\n\n        if (typeof this.__clickOutsideHandlerProp !== 'function') {\n          throw new Error(\"WrappedComponent: \" + componentName + \" lacks a function for processing outside click events specified by the handleClickOutside config option.\");\n        }\n      }\n\n      this.componentNode = this.__getComponentNode(); // return early so we dont initiate onClickOutside\n\n      if (this.props.disableOnClickOutside) return;\n      this.enableOnClickOutside();\n    };\n\n    _proto.componentDidUpdate = function componentDidUpdate() {\n      this.componentNode = this.__getComponentNode();\n    }\n    /**\n     * Remove all document's event listeners for this component\n     */\n    ;\n\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      this.disableOnClickOutside();\n    }\n    /**\n     * Can be called to explicitly enable event listening\n     * for clicks and touches outside of this element.\n     */\n    ;\n\n    /**\n     * Pass-through render\n     */\n    _proto.render = function render() {\n      // eslint-disable-next-line no-unused-vars\n      var _this$props = this.props;\n          _this$props.excludeScrollbar;\n          var props = _objectWithoutPropertiesLoose(_this$props, [\"excludeScrollbar\"]);\n\n      if (WrappedComponent.prototype && WrappedComponent.prototype.isReactComponent) {\n        props.ref = this.getRef;\n      } else {\n        props.wrappedRef = this.getRef;\n      }\n\n      props.disableOnClickOutside = this.disableOnClickOutside;\n      props.enableOnClickOutside = this.enableOnClickOutside;\n      return createElement(WrappedComponent, props);\n    };\n\n    return onClickOutside;\n  }(Component), _class.displayName = \"OnClickOutside(\" + componentName + \")\", _class.defaultProps = {\n    eventTypes: ['mousedown', 'touchstart'],\n    excludeScrollbar: config && config.excludeScrollbar || false,\n    outsideClickIgnoreClass: IGNORE_CLASS_NAME,\n    preventDefault: false,\n    stopPropagation: false\n  }, _class.getClass = function () {\n    return WrappedComponent.getClass ? WrappedComponent.getClass() : WrappedComponent;\n  }, _temp;\n}export default onClickOutsideHOC;export{IGNORE_CLASS_NAME};"],"names":["_inheritsLoose","subClass","superClass","_setPrototypeOf","o","p","_objectWithoutPropertiesLoose","source","excluded","target","sourceKeys","key","i","_assertThisInitialized","self","isNodeFound","current","componentNode","ignoreClass","findHighest","clickedScrollbar","evt","testPassiveEventSupport","passive","options","noop","autoInc","seed","uid","passiveEventSupport","handlersMap","enabledInstances","touchEvents","IGNORE_CLASS_NAME","getEventHandlerOptions","instance","eventName","handlerOptions","isTouchEvent","onClickOutsideHOC","WrappedComponent","config","_class","_temp","componentName","_Component","onClickOutside","props","_this","event","findDOMNode","events","fn","ref","_proto","_this$props","createElement","Component"],"mappings":"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","x_google_ignoreList":[0]}