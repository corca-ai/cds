{"version":3,"file":"flip.mjs","sources":["../../../../../../../../../node_modules/.pnpm/@popperjs+core@2.11.8/node_modules/@popperjs/core/lib/modifiers/flip.js"],"sourcesContent":["import getOppositePlacement from \"../utils/getOppositePlacement.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getOppositeVariationPlacement from \"../utils/getOppositeVariationPlacement.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport computeAutoPlacement from \"../utils/computeAutoPlacement.js\";\nimport { bottom, top, start, right, left, auto } from \"../enums.js\";\nimport getVariation from \"../utils/getVariation.js\"; // eslint-disable-next-line import/no-unused-modules\n\nfunction getExpandedFallbackPlacements(placement) {\n  if (getBasePlacement(placement) === auto) {\n    return [];\n  }\n\n  var oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeVariationPlacement(placement), oppositePlacement, getOppositeVariationPlacement(oppositePlacement)];\n}\n\nfunction flip(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n\n  if (state.modifiersData[name]._skip) {\n    return;\n  }\n\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? true : _options$altAxis,\n      specifiedFallbackPlacements = options.fallbackPlacements,\n      padding = options.padding,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      _options$flipVariatio = options.flipVariations,\n      flipVariations = _options$flipVariatio === void 0 ? true : _options$flipVariatio,\n      allowedAutoPlacements = options.allowedAutoPlacements;\n  var preferredPlacement = state.options.placement;\n  var basePlacement = getBasePlacement(preferredPlacement);\n  var isBasePlacement = basePlacement === preferredPlacement;\n  var fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipVariations ? [getOppositePlacement(preferredPlacement)] : getExpandedFallbackPlacements(preferredPlacement));\n  var placements = [preferredPlacement].concat(fallbackPlacements).reduce(function (acc, placement) {\n    return acc.concat(getBasePlacement(placement) === auto ? computeAutoPlacement(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding,\n      flipVariations: flipVariations,\n      allowedAutoPlacements: allowedAutoPlacements\n    }) : placement);\n  }, []);\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var checksMap = new Map();\n  var makeFallbackChecks = true;\n  var firstFittingPlacement = placements[0];\n\n  for (var i = 0; i < placements.length; i++) {\n    var placement = placements[i];\n\n    var _basePlacement = getBasePlacement(placement);\n\n    var isStartVariation = getVariation(placement) === start;\n    var isVertical = [top, bottom].indexOf(_basePlacement) >= 0;\n    var len = isVertical ? 'width' : 'height';\n    var overflow = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      altBoundary: altBoundary,\n      padding: padding\n    });\n    var mainVariationSide = isVertical ? isStartVariation ? right : left : isStartVariation ? bottom : top;\n\n    if (referenceRect[len] > popperRect[len]) {\n      mainVariationSide = getOppositePlacement(mainVariationSide);\n    }\n\n    var altVariationSide = getOppositePlacement(mainVariationSide);\n    var checks = [];\n\n    if (checkMainAxis) {\n      checks.push(overflow[_basePlacement] <= 0);\n    }\n\n    if (checkAltAxis) {\n      checks.push(overflow[mainVariationSide] <= 0, overflow[altVariationSide] <= 0);\n    }\n\n    if (checks.every(function (check) {\n      return check;\n    })) {\n      firstFittingPlacement = placement;\n      makeFallbackChecks = false;\n      break;\n    }\n\n    checksMap.set(placement, checks);\n  }\n\n  if (makeFallbackChecks) {\n    // `2` may be desired in some cases â€“ research later\n    var numberOfChecks = flipVariations ? 3 : 1;\n\n    var _loop = function _loop(_i) {\n      var fittingPlacement = placements.find(function (placement) {\n        var checks = checksMap.get(placement);\n\n        if (checks) {\n          return checks.slice(0, _i).every(function (check) {\n            return check;\n          });\n        }\n      });\n\n      if (fittingPlacement) {\n        firstFittingPlacement = fittingPlacement;\n        return \"break\";\n      }\n    };\n\n    for (var _i = numberOfChecks; _i > 0; _i--) {\n      var _ret = _loop(_i);\n\n      if (_ret === \"break\") break;\n    }\n  }\n\n  if (state.placement !== firstFittingPlacement) {\n    state.modifiersData[name]._skip = true;\n    state.placement = firstFittingPlacement;\n    state.reset = true;\n  }\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'flip',\n  enabled: true,\n  phase: 'main',\n  fn: flip,\n  requiresIfExists: ['offset'],\n  data: {\n    _skip: false\n  }\n};"],"names":["getExpandedFallbackPlacements","placement","getBasePlacement","auto","oppositePlacement","getOppositePlacement","getOppositeVariationPlacement","flip","_ref","state","options","name","_options$mainAxis","checkMainAxis","_options$altAxis","checkAltAxis","specifiedFallbackPlacements","padding","boundary","rootBoundary","altBoundary","_options$flipVariatio","flipVariations","allowedAutoPlacements","preferredPlacement","basePlacement","isBasePlacement","fallbackPlacements","placements","acc","computeAutoPlacement","referenceRect","popperRect","checksMap","makeFallbackChecks","firstFittingPlacement","i","_basePlacement","isStartVariation","getVariation","start","isVertical","top","bottom","len","overflow","detectOverflow","mainVariationSide","right","left","altVariationSide","checks","check","numberOfChecks","_loop","_i","fittingPlacement","_ret","flip$1"],"mappings":"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","x_google_ignoreList":[0]}