{"version":3,"file":"computeStyles.mjs","sources":["../../../../../../../../../node_modules/.pnpm/@popperjs+core@2.11.8/node_modules/@popperjs/core/lib/modifiers/computeStyles.js"],"sourcesContent":["import { top, left, right, bottom, end } from \"../enums.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getWindow from \"../dom-utils/getWindow.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getComputedStyle from \"../dom-utils/getComputedStyle.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport { round } from \"../utils/math.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar unsetSides = {\n  top: 'auto',\n  right: 'auto',\n  bottom: 'auto',\n  left: 'auto'\n}; // Round the offsets to the nearest suitable subpixel based on the DPR.\n// Zooming can change the DPR, but it seems to report a value that will\n// cleanly divide the values into the appropriate subpixels.\n\nfunction roundOffsetsByDPR(_ref, win) {\n  var x = _ref.x,\n      y = _ref.y;\n  var dpr = win.devicePixelRatio || 1;\n  return {\n    x: round(x * dpr) / dpr || 0,\n    y: round(y * dpr) / dpr || 0\n  };\n}\n\nexport function mapToStyles(_ref2) {\n  var _Object$assign2;\n\n  var popper = _ref2.popper,\n      popperRect = _ref2.popperRect,\n      placement = _ref2.placement,\n      variation = _ref2.variation,\n      offsets = _ref2.offsets,\n      position = _ref2.position,\n      gpuAcceleration = _ref2.gpuAcceleration,\n      adaptive = _ref2.adaptive,\n      roundOffsets = _ref2.roundOffsets,\n      isFixed = _ref2.isFixed;\n  var _offsets$x = offsets.x,\n      x = _offsets$x === void 0 ? 0 : _offsets$x,\n      _offsets$y = offsets.y,\n      y = _offsets$y === void 0 ? 0 : _offsets$y;\n\n  var _ref3 = typeof roundOffsets === 'function' ? roundOffsets({\n    x: x,\n    y: y\n  }) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref3.x;\n  y = _ref3.y;\n  var hasX = offsets.hasOwnProperty('x');\n  var hasY = offsets.hasOwnProperty('y');\n  var sideX = left;\n  var sideY = top;\n  var win = window;\n\n  if (adaptive) {\n    var offsetParent = getOffsetParent(popper);\n    var heightProp = 'clientHeight';\n    var widthProp = 'clientWidth';\n\n    if (offsetParent === getWindow(popper)) {\n      offsetParent = getDocumentElement(popper);\n\n      if (getComputedStyle(offsetParent).position !== 'static' && position === 'absolute') {\n        heightProp = 'scrollHeight';\n        widthProp = 'scrollWidth';\n      }\n    } // $FlowFixMe[incompatible-cast]: force type refinement, we compare offsetParent with window above, but Flow doesn't detect it\n\n\n    offsetParent = offsetParent;\n\n    if (placement === top || (placement === left || placement === right) && variation === end) {\n      sideY = bottom;\n      var offsetY = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.height : // $FlowFixMe[prop-missing]\n      offsetParent[heightProp];\n      y -= offsetY - popperRect.height;\n      y *= gpuAcceleration ? 1 : -1;\n    }\n\n    if (placement === left || (placement === top || placement === bottom) && variation === end) {\n      sideX = right;\n      var offsetX = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.width : // $FlowFixMe[prop-missing]\n      offsetParent[widthProp];\n      x -= offsetX - popperRect.width;\n      x *= gpuAcceleration ? 1 : -1;\n    }\n  }\n\n  var commonStyles = Object.assign({\n    position: position\n  }, adaptive && unsetSides);\n\n  var _ref4 = roundOffsets === true ? roundOffsetsByDPR({\n    x: x,\n    y: y\n  }, getWindow(popper)) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref4.x;\n  y = _ref4.y;\n\n  if (gpuAcceleration) {\n    var _Object$assign;\n\n    return Object.assign({}, commonStyles, (_Object$assign = {}, _Object$assign[sideY] = hasY ? '0' : '', _Object$assign[sideX] = hasX ? '0' : '', _Object$assign.transform = (win.devicePixelRatio || 1) <= 1 ? \"translate(\" + x + \"px, \" + y + \"px)\" : \"translate3d(\" + x + \"px, \" + y + \"px, 0)\", _Object$assign));\n  }\n\n  return Object.assign({}, commonStyles, (_Object$assign2 = {}, _Object$assign2[sideY] = hasY ? y + \"px\" : '', _Object$assign2[sideX] = hasX ? x + \"px\" : '', _Object$assign2.transform = '', _Object$assign2));\n}\n\nfunction computeStyles(_ref5) {\n  var state = _ref5.state,\n      options = _ref5.options;\n  var _options$gpuAccelerat = options.gpuAcceleration,\n      gpuAcceleration = _options$gpuAccelerat === void 0 ? true : _options$gpuAccelerat,\n      _options$adaptive = options.adaptive,\n      adaptive = _options$adaptive === void 0 ? true : _options$adaptive,\n      _options$roundOffsets = options.roundOffsets,\n      roundOffsets = _options$roundOffsets === void 0 ? true : _options$roundOffsets;\n  var commonStyles = {\n    placement: getBasePlacement(state.placement),\n    variation: getVariation(state.placement),\n    popper: state.elements.popper,\n    popperRect: state.rects.popper,\n    gpuAcceleration: gpuAcceleration,\n    isFixed: state.options.strategy === 'fixed'\n  };\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.styles.popper = Object.assign({}, state.styles.popper, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.popperOffsets,\n      position: state.options.strategy,\n      adaptive: adaptive,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  if (state.modifiersData.arrow != null) {\n    state.styles.arrow = Object.assign({}, state.styles.arrow, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.arrow,\n      position: 'absolute',\n      adaptive: false,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-placement': state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'computeStyles',\n  enabled: true,\n  phase: 'beforeWrite',\n  fn: computeStyles,\n  data: {}\n};"],"names":["unsetSides","roundOffsetsByDPR","_ref","win","x","y","dpr","round","mapToStyles","_ref2","_Object$assign2","popper","popperRect","placement","variation","offsets","position","gpuAcceleration","adaptive","roundOffsets","isFixed","_offsets$x","_offsets$y","_ref3","hasX","hasY","sideX","left","sideY","top","offsetParent","getOffsetParent","heightProp","widthProp","getWindow","getDocumentElement","getComputedStyle","right","end","bottom","offsetY","offsetX","commonStyles","_ref4","_Object$assign","computeStyles","_ref5","state","options","_options$gpuAccelerat","_options$adaptive","_options$roundOffsets","getBasePlacement","getVariation","computeStyles$1"],"mappings":"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","x_google_ignoreList":[0]}