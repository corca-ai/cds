import * as i from "react";
import { useEffect as A, useCallback as z, useState as P } from "react";
import { keyframes as m, setup as C, css as N, styled as f } from "../../../../goober@2.1.14_csstype@3.1.3/node_modules/goober/dist/goober.modern.mjs";
var M = (t) => typeof t == "function", k = (t, e) => M(t) ? t(e) : t, S = /* @__PURE__ */ (() => {
  let t = 0;
  return () => (++t).toString();
})(), O = /* @__PURE__ */ (() => {
  let t;
  return () => {
    if (t === void 0 && typeof window < "u") {
      let e = matchMedia("(prefers-reduced-motion: reduce)");
      t = !e || e.matches;
    }
    return t;
  };
})(), j = 20, x = /* @__PURE__ */ new Map(), H = 1e3, D = (t) => {
  if (x.has(t))
    return;
  let e = setTimeout(() => {
    x.delete(t), y({ type: 4, toastId: t });
  }, H);
  x.set(t, e);
}, L = (t) => {
  let e = x.get(t);
  e && clearTimeout(e);
}, $ = (t, e) => {
  switch (e.type) {
    case 0:
      return { ...t, toasts: [e.toast, ...t.toasts].slice(0, j) };
    case 1:
      return e.toast.id && L(e.toast.id), { ...t, toasts: t.toasts.map((r) => r.id === e.toast.id ? { ...r, ...e.toast } : r) };
    case 2:
      let { toast: a } = e;
      return t.toasts.find((r) => r.id === a.id) ? $(t, { type: 1, toast: a }) : $(t, { type: 0, toast: a });
    case 3:
      let { toastId: o } = e;
      return o ? D(o) : t.toasts.forEach((r) => {
        D(r.id);
      }), { ...t, toasts: t.toasts.map((r) => r.id === o || o === void 0 ? { ...r, visible: !1 } : r) };
    case 4:
      return e.toastId === void 0 ? { ...t, toasts: [] } : { ...t, toasts: t.toasts.filter((r) => r.id !== e.toastId) };
    case 5:
      return { ...t, pausedAt: e.time };
    case 6:
      let s = e.time - (t.pausedAt || 0);
      return { ...t, pausedAt: void 0, toasts: t.toasts.map((r) => ({ ...r, pauseDuration: r.pauseDuration + s })) };
  }
}, w = [], E = { toasts: [], pausedAt: void 0 }, y = (t) => {
  E = $(E, t), w.forEach((e) => {
    e(E);
  });
}, U = { blank: 4e3, error: 4e3, success: 2e3, loading: 1 / 0, custom: 4e3 }, B = (t = {}) => {
  let [e, a] = P(E);
  A(() => (w.push(a), () => {
    let s = w.indexOf(a);
    s > -1 && w.splice(s, 1);
  }), [e]);
  let o = e.toasts.map((s) => {
    var r, l;
    return { ...t, ...t[s.type], ...s, duration: s.duration || ((r = t[s.type]) == null ? void 0 : r.duration) || (t == null ? void 0 : t.duration) || U[s.type], style: { ...t.style, ...(l = t[s.type]) == null ? void 0 : l.style, ...s.style } };
  });
  return { ...e, toasts: o };
}, F = (t, e = "blank", a) => ({ createdAt: Date.now(), visible: !0, type: e, ariaProps: { role: "status", "aria-live": "polite" }, message: t, pauseDuration: 0, ...a, id: (a == null ? void 0 : a.id) || S() }), g = (t) => (e, a) => {
  let o = F(e, t, a);
  return y({ type: 2, toast: o }), o.id;
}, c = (t, e) => g("blank")(t, e);
c.error = g("error");
c.success = g("success");
c.loading = g("loading");
c.custom = g("custom");
c.dismiss = (t) => {
  y({ type: 3, toastId: t });
};
c.remove = (t) => y({ type: 4, toastId: t });
c.promise = (t, e, a) => {
  let o = c.loading(e.loading, { ...a, ...a == null ? void 0 : a.loading });
  return t.then((s) => (c.success(k(e.success, s), { id: o, ...a, ...a == null ? void 0 : a.success }), s)).catch((s) => {
    c.error(k(e.error, s), { id: o, ...a, ...a == null ? void 0 : a.error });
  }), t;
};
var R = (t, e) => {
  y({ type: 1, toast: { id: t, height: e } });
}, V = () => {
  y({ type: 5, time: Date.now() });
}, Y = (t) => {
  let { toasts: e, pausedAt: a } = B(t);
  A(() => {
    if (a)
      return;
    let r = Date.now(), l = e.map((n) => {
      if (n.duration === 1 / 0)
        return;
      let p = (n.duration || 0) + n.pauseDuration - (r - n.createdAt);
      if (p < 0) {
        n.visible && c.dismiss(n.id);
        return;
      }
      return setTimeout(() => c.dismiss(n.id), p);
    });
    return () => {
      l.forEach((n) => n && clearTimeout(n));
    };
  }, [e, a]);
  let o = z(() => {
    a && y({ type: 6, time: Date.now() });
  }, [a]), s = z((r, l) => {
    let { reverseOrder: n = !1, gutter: p = 8, defaultPosition: d } = l || {}, h = e.filter((u) => (u.position || d) === (r.position || d) && u.height), I = h.findIndex((u) => u.id === r.id), b = h.filter((u, T) => T < I && u.visible).length;
    return h.filter((u) => u.visible).slice(...n ? [b + 1] : [0, b]).reduce((u, T) => u + (T.height || 0) + p, 0);
  }, [e]);
  return { toasts: e, handlers: { updateHeight: R, startPause: V, endPause: o, calculateOffset: s } };
}, _ = m`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`, G = m`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`, J = m`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`, Q = f("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${(t) => t.primary || "#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${_} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${G} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${(t) => t.secondary || "#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${J} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`, W = m`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`, X = f("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${(t) => t.secondary || "#e0e0e0"};
  border-right-color: ${(t) => t.primary || "#616161"};
  animation: ${W} 1s linear infinite;
`, Z = m`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`, q = m`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`, K = f("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${(t) => t.primary || "#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Z} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${q} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${(t) => t.secondary || "#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`, tt = f("div")`
  position: absolute;
`, et = f("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`, at = m`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`, rt = f("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${at} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`, ot = ({ toast: t }) => {
  let { icon: e, type: a, iconTheme: o } = t;
  return e !== void 0 ? typeof e == "string" ? i.createElement(rt, null, e) : e : a === "blank" ? null : i.createElement(et, null, i.createElement(X, { ...o }), a !== "loading" && i.createElement(tt, null, a === "error" ? i.createElement(Q, { ...o }) : i.createElement(K, { ...o })));
}, st = (t) => `
0% {transform: translate3d(0,${t * -200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`, it = (t) => `
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t * -150}%,-1px) scale(.6); opacity:0;}
`, nt = "0%{opacity:0;} 100%{opacity:1;}", lt = "0%{opacity:1;} 100%{opacity:0;}", dt = f("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`, ct = f("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`, pt = (t, e) => {
  let a = t.includes("top") ? 1 : -1, [o, s] = O() ? [nt, lt] : [st(a), it(a)];
  return { animation: e ? `${m(o)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards` : `${m(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)` };
}, ut = i.memo(({ toast: t, position: e, style: a, children: o }) => {
  let s = t.height ? pt(t.position || e || "top-center", t.visible) : { opacity: 0 }, r = i.createElement(ot, { toast: t }), l = i.createElement(ct, { ...t.ariaProps }, k(t.message, t));
  return i.createElement(dt, { className: t.className, style: { ...s, ...a, ...t.style } }, typeof o == "function" ? o({ icon: r, message: l }) : i.createElement(i.Fragment, null, r, l));
});
C(i.createElement);
var mt = ({ id: t, className: e, style: a, onHeightUpdate: o, children: s }) => {
  let r = i.useCallback((l) => {
    if (l) {
      let n = () => {
        let p = l.getBoundingClientRect().height;
        o(t, p);
      };
      n(), new MutationObserver(n).observe(l, { subtree: !0, childList: !0, characterData: !0 });
    }
  }, [t, o]);
  return i.createElement("div", { ref: r, className: e, style: a }, s);
}, ft = (t, e) => {
  let a = t.includes("top"), o = a ? { top: 0 } : { bottom: 0 }, s = t.includes("center") ? { justifyContent: "center" } : t.includes("right") ? { justifyContent: "flex-end" } : {};
  return { left: 0, right: 0, display: "flex", position: "absolute", transition: O() ? void 0 : "all 230ms cubic-bezier(.21,1.02,.73,1)", transform: `translateY(${e * (a ? 1 : -1)}px)`, ...o, ...s };
}, yt = N`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`, v = 16, bt = ({ reverseOrder: t, position: e = "top-center", toastOptions: a, gutter: o, children: s, containerStyle: r, containerClassName: l }) => {
  let { toasts: n, handlers: p } = Y(a);
  return i.createElement("div", { style: { position: "fixed", zIndex: 9999, top: v, left: v, right: v, bottom: v, pointerEvents: "none", ...r }, className: l, onMouseEnter: p.startPause, onMouseLeave: p.endPause }, n.map((d) => {
    let h = d.position || e, I = p.calculateOffset(d, { reverseOrder: t, gutter: o, defaultPosition: e }), b = ft(h, I);
    return i.createElement(mt, { id: d.id, key: d.id, onHeightUpdate: p.updateHeight, className: d.visible ? yt : "", style: b }, d.type === "custom" ? k(d.message, d) : s ? s(d) : i.createElement(ut, { toast: d, position: h }));
  }));
}, vt = c;
export {
  K as CheckmarkIcon,
  Q as ErrorIcon,
  X as LoaderIcon,
  ut as ToastBar,
  ot as ToastIcon,
  bt as Toaster,
  vt as default,
  k as resolveValue,
  c as toast,
  Y as useToaster,
  B as useToasterStore
};
//# sourceMappingURL=index.mjs.map
